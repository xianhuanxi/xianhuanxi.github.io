<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>欢喜生活馆</title>
    <script src="https://cdn.jsdelivr.net/npm/web-animations-js@2.3.2/web-animations.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/muuri@0.9.5/dist/muuri.min.js"></script>
    
    <style>
        :root {
            --col-width: 0px; 
            --gutter: 18px; 
            --label-height: 26px;
            --float-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
        }

        body {
            margin: 0; padding: 0;
            /* 底色蒙白：原色为主，亮度提升 */
            background: linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5)), 
                        linear-gradient(135deg, #d8b4fe 0%, #7db9f8 100%);
            min-height: 100vh;
            font-family: -apple-system, sans-serif;
            overflow-x: hidden; touch-action: pan-y; 
            user-select: none; -webkit-user-select: none;
        }

        .grid { position: relative; margin: 0 auto; padding: 20px 10px 300px; box-sizing: border-box; }
        .item { position: absolute; padding: calc(var(--gutter) / 2); box-sizing: border-box; }
        .item-content { width: 100%; height: 100%; display: flex; flex-direction: column; }
        
        .card {
            width: 100%; flex-grow: 1; border-radius: 28px;
            /* 50% 透明度 */
            backdrop-filter: blur(35px) saturate(170%); -webkit-backdrop-filter: blur(35px) saturate(170%);
            border: 1px solid rgba(255, 255, 255, 0.5); 
            box-shadow: var(--float-shadow);
            display: flex; justify-content: center; align-items: center; 
            overflow: hidden; position: relative;
        }

        /* 模块配色 0.5 透明度 */
        .c-pink .card { background: linear-gradient(135deg, rgba(255, 192, 203, 0.5), rgba(255, 255, 255, 0.2)); }
        .c-cyan .card { background: linear-gradient(135deg, rgba(165, 243, 239, 0.5), rgba(255, 255, 255, 0.2)); }
        .c-blue .card { background: linear-gradient(135deg, rgba(135, 206, 250, 0.5), rgba(255, 255, 255, 0.2)); }
        .c-purple .card { background: linear-gradient(135deg, rgba(216, 180, 254, 0.5), rgba(255, 255, 255, 0.2)); }
        .c-orange .card { background: linear-gradient(135deg, rgba(255, 218, 185, 0.5), rgba(255, 255, 255, 0.2)); }

        /* 核心修改：图片占据面积增加一倍 (由50%改为85%) */
        .img-wrap { width: 85%; height: 85%; display: flex; justify-content: center; align-items: center; }
        .img-wrap img { width: 100%; height: 100%; object-fit: contain; }

        .label { height: var(--label-height); line-height: var(--label-height); font-size: 11px; color: #111; font-weight: 600; text-align: center; margin-top: 5px; }

        /* 保持 40 版的原始尺寸计算 */
        .item.w1h1 { width: 25%; height: calc(var(--col-width) + var(--label-height) + 6px); }
        .item.w2h1 { width: 50%; height: calc(var(--col-width) + var(--label-height) + 6px); }
        .item.w2h2 { width: 50%; height: calc((var(--col-width) + var(--label-height) + 6px) * 2); }
        .item.w1h2 { width: 25%; height: calc((var(--col-width) + var(--label-height) + 6px) * 2); }
        .item.w4h2 { width: 100%; height: calc((var(--col-width) + var(--label-height) + 6px) * 2); }
    </style>
</head>
<body>
    <div id="grid" class="grid"></div>

<script>
    function updateLayout() {
        const w = Math.min(window.innerWidth, 500) - 20;
        document.documentElement.style.setProperty('--col-width', (w / 4) + 'px');
        document.getElementById('grid').style.width = w + 'px';
    }
    updateLayout();

    const modules = [
        { w: 2, h: 2, name: "测试中...", img: "1001.png", color: "c-pink", url: "shop.html" },
        { w: 2, h: 1, name: "测试中...", img: "1002.png", color: "c-blue", url: "shop.html" },
        { w: 1, h: 1, name: "测试中...", img: "1003.png", color: "c-pink", url: "shop.html" },
        { w: 1, h: 2, name: "测试中...", img: "1004.png", color: "c-cyan", url: "shop.html" },
        { w: 1, h: 1, name: "测试中...", img: "1005.png", color: "c-purple", url: "shop.html" },
        { w: 1, h: 1, name: "测试中...", img: "1006.png", color: "c-cyan", url: "shop.html" },
        { w: 1, h: 1, name: "测试中...", img: "1007.png", color: "c-cyan", url: "shop.html" },
        { w: 1, h: 2, name: "测试中...", img: "1008.png", color: "c-pink", url: "shop.html" },
        { w: 2, h: 1, name: "测试中...", img: "1009.png", color: "c-blue", url: "shop.html" },
        { w: 2, h: 1, name: "测试中...", img: "1010.png", color: "c-orange", url: "shop.html" },
        { w: 1, h: 1, name: "测试中...", img: "1011.png", color: "c-cyan", url: "shop.html" },
        { w: 2, h: 2, name: "测试中...", img: "1012.png", color: "c-pink", url: "shop.html" },
        { w: 1, h: 1, name: "测试中...", img: "1013.png", color: "c-purple", url: "shop.html" },
        { w: 1, h: 1, name: "测试中...", img: "1014.png", color: "c-cyan", url: "shop.html" },
        { w: 1, h: 1, name: "测试中...", img: "1015.png", color: "c-cyan", url: "shop.html" },
        { w: 4, h: 2, name: "测试中...", img: "1016.png", color: "c-blue", url: "shop.html" }
    ];

    const gridEl = document.getElementById('grid');
    modules.forEach(m => {
        const el = document.createElement('div');
        el.className = `item w${m.w}h${m.h} ${m.color}`;
        const container = document.createElement('div');
        container.className = 'item-content';
        const card = document.createElement('div');
        card.className = "card";
        const wrap = document.createElement('div');
        wrap.className = "img-wrap";
        
        const img = new Image();
        img.src = m.img;
        
        wrap.appendChild(img);
        card.appendChild(wrap);
        const label = document.createElement('div');
        label.className = "label";
        label.innerText = m.name;
        
        container.appendChild(card);
        container.appendChild(label);
        el.appendChild(container);
        el.onclick = () => { if(!el.classList.contains('muuri-item-dragging')) window.location.href = m.url; };
        gridEl.appendChild(el);
    });

    window.onload = function() {
        const grid = new Muuri('.grid', { dragEnabled: true, dragHandle: '.card', layout: { fillGaps: true } });
        window.addEventListener('resize', () => { updateLayout(); grid.refreshItems().layout(); });
        setTimeout(() => grid.layout(), 300);
    };
</script>
</body>
</html>
